
# Amazon Simple Email Service 

## SES란?
- Amazon Simple Email Service 으로 모든 어플리케이션 안에서 이메일을 보낼 수 있는 경제적이고 유연하며 확장 가능한 이메일 서비스
- SES를 통해 트랜잭션 , 마케팅 , 대량 이메일 커뮤니케이션 등을 포함한 다수의 이메일 사용 지원 가능

<br/>

## 특징
- Email 전송/수신 서비스
- 이메일 수신 시 여러 방법으로 처리 가능
    - Lambda 호출
    - SNS 호출
    - S3에 이메일 저장
- 대량의 이메일을 보내기 위해서는 샌드박스 모드 해제 필요 (AWS Support Center)

<br/>

---
<br/>

# Amazon Simple Notification Service

## SNS란?
- Amazon Simple Notification Service 으로 어플리케이션 간 (A2A) 및 어플리케이션과 사용자 (A2P) 통신을 모두 지원하는 완전 관리형 메세징 서비스
- Pub / Sub 기반의 메세징 서비스
    - 하나의 토픽을 여러 주체가 구독
        - 토픽에 전달 된 내용을 구독한 모든 주체가 전달받아 처리
- 다양한 프로토콜로 메세지 전달 가능
    - 이메일
    - Http(s)
    - SQS
    - SMS
    - Lambda
- `하나의 메세지를 여러 서비스에서 처리`

<br/>

## Pub / Sub 란?
- 요청 > 행위 > 그 행위를 `구독` 하고 있는 모든 주체가 각자의 역할(서비스) 를 처리

<br/>

## Fan Out Architecture
- 예) User => S3 => SNS => 각 EC2 (Hq,480p,1080p,썸네일,오디오) 등으로 전달
- 하나의 메세지로 각자의 작업 실행

<br/>

---
<br/>

# Amazon Simple Queue Service

## SQS란?
- Amazon Simple Queue Service 으로 마이크로서비스 , 분산 시스템 및 서버리스 어플리케이션을 쉽게 분리하고 확장할 수 있도록 지원하는 완전관리형 메세지 대기열 서비스
- AWS에서 제공하는 큐 서비스
    - 다른 서비스에서 사용할 수 있도록 메세지를 잠시 저장하는 용도
    - 최대 사이즈 : 256kb , 최대 저장일 : 14일까지 저장 가능
- 주로 AWS 서비스들의 느슨한 연결을 수립하려 사용 (디커플링)
- `하나의 메세지를 한번만 처리`
- 필요성
    - 예) User(영상 업로드) => S3 => Lambda => EC2(인코딩)
        - EC2 에러 시 영상 처리 Fail 됨
        - 해결방법 Lambda => (SQS) => EC2 으로 작업순서 수정
        - EC2가 SQS에서 메세지를 하나씩 처리
        - EC2가 FAIL 되더라도 SQS에서 메세지가 유지되어 복구되어 작업 재개 가능

<br/>

---
<br/>

# `SNS` vs `SQS`
|내용|SNS|SQS|
|--|--|--|
|목적|`여러 서비스`에 `메세지`를 `전달`하기 위해 사용|`특정 작업`을 `다음 서비스`로 `넘겨주기` 위해 사용|
|메세지 처리 횟수|`하나의 메세지`를 `여러 서비스`에서 처리|`하나의 메세지`는 `한번만` 처리|
|메세지 보관|보관 불가능|최대 14일 보관 가능|
|전달 방식|PUSH|PULL|
|아키텍처 활용|Fan Out|디커플링|


