# Security Group

## 보안그룹이란?
- NACL 과 함께 방화벽 역할 서비스
- Port 제어 [허용/거부]
    - 기본적으로 모든 포트 비활성화
    - 선택적으로 트래픽이 지나갈 수 있는 Prot 와 Source를 설정 가능
    - Deny 불가능 => NACL 에서는 가능함
- 인스턴스 단위 (정확히는 ENI 단위)
    - 하나의 인스턴스에 하나 이상의 SG 설정 가능
    - NACL 경우 서브넷 단위
    - 설정된 인스턴스는 설정한 모든 SG 룰을 적용받음

## Stateful
- 보안그룹은 Stateful
    - 인바운드로 들어온 트래픽은 별도의 아웃바운드 설정 없이 나갈 수 있음
    - NACL 은 StateLess

## Stateless
- NACL 의 경우
- 인바운드로 들어온 트래픽이라 할지라도 아웃바운드 설정을 해주어야 트래픽이 나갈 수 있음

## NACL
- 네트워크 ACL  
    - 방화벽 역할 담당
    - 서브넷 단위
    - 포트 및 아이프를 직접 Deny 가능
        - 외부 공격을 받는 상황 등 특정 아이피를 블록하고 싶을 때 사용

## 보안 그룹 Source
    - IP Range (CIDR)
    - 접두사 목록
        - 하나 이상의 CIDR 블록의 집합
        - 보안 그룹 혹은 Route Table에서 많은 대상을 참조하기 위해 사용
        - 두가지 종류
            - 고객 관리형 : 직접 IP 주소를 생성/수정/삭제 할 수 있으며 다른 계정과도 공유 가능
            - AWS 관리형 : AWs의 서비스들을 위한 IP목록. 수정/삭제/업데이트가 불가능함
                - DynamoDB , S3 , CloudFront 
        - IPv4 , IPv6 둘다 사용 가능. 단 한 접두사 목록에 두가지 타입을 동시에 사용은 불가능
        - 생성 시점에 최대 엔트리 숫자를 지정 (이후 변경 가능)
    - 다른 보안그룹 (보안그룹 참조)

## 보안그룹 Limit
- 리전당 2500개 , 증가 요청 가능
- 인바운드 규칙 60개 , 아웃바운드 규칙 60개 (Ipv4 ,Ipv6 구분) > 증가요청 가능
    - Ipv4 60,60 , Ipv6 60,60
- ENI당 최대 보안 그룹은 5개 , 최대 16개까지 증가 가능
- 한 인스턴스당 최대 적용 가능 규칙은 1000개

